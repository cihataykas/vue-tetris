(function(t){function e(e){for(var i,s,o=e[0],u=e[1],l=e[2],h=0,d=[];h<o.length;h++)s=o[h],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);c&&c(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},r=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"356d":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],s=(n("5c0b"),n("2877")),o={},u=Object(s["a"])(o,a,r,!1,null,null,null),l=u.exports,c=n("8c4f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Game")},d=[],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-tetris theme-light"},[t.game?n("div",{staticClass:"tile-container"},t._l(t.tiles,(function(e,i){return n("div",{key:i,staticClass:"tile-row"},t._l(e,(function(e,i){return n("div",{key:i,class:["tile",e.animationClass,{active:e.value}],style:{background:"linear-gradient(to right bottom, rgb(255, 255, 255) 50%, "+e.color+" 50%)"}},[n("div",{staticClass:"tile-part",style:{backgroundColor:e.color}}),t.showTileIds?n("span",[t._v(t._s(e.value))]):t._e()])})),0)})),0):t._e(),n("div",{staticClass:"bg"})])},f=[],m=n("d4ec"),p=n("bee2"),g=n("b85c"),b=n("2909"),y=(n("a434"),n("159b"),function(){function t(e,n,i){Object(m["a"])(this,t),this.value=e,this.color=n,this.animationClass=i,this.animationTimeout=null}return Object(p["a"])(t,[{key:"addAnimationClass",value:function(t){this.animationClass="animate__animated ".concat(t)}}]),t}()),k=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;Object(m["a"])(this,t),this.game=e,this.width=n,this.height=i,this.currentShape=null,this.tiles=this.build(),this.landedTiles=this.build(),this.removeLineTimeout=null}return Object(p["a"])(t,[{key:"build",value:function(){for(var t=[],e=0;e<this.height;e++){t[e]=[];for(var n=0;n<this.width;n++)t[e][n]=new y(0,"transparent")}return t}},{key:"renderLandedTiles",value:function(){for(var t=0;t<this.tiles.length;t++)for(var e=0;e<this.tiles[t].length;e++)this.tiles[t].splice(e,1,this.landedTiles[t][e])}},{key:"checkAndRemoveLines",value:function(){for(var t=this,e=function(e){var n=t.landedTiles[e];n.every((function(t){return-1===t.value}))&&(t.game.pause(),n.forEach((function(t){t.animationClass="animate__animated animate__zoomOut"})),t.renderLandedTiles(),t.removeLineTimeout&&clearTimeout(t.removeLineTimeout),t.removeLineTimeout=setTimeout((function(){t.currentShape=null,t.landedTiles.splice(e,1),t.landedTiles.unshift(Object(b["a"])(t.landedTiles[0])),t.game.resume()}),1e3))},n=0;n<this.landedTiles.length;n++)e(n)}},{key:"isEnd",get:function(){var t=this.currentShape&&this.currentShape.landed;return t&&this.landedTiles[0].some((function(t){return 0!==t.value}))}},{key:"renderShape",value:function(){if(this.currentShape){var t,e=this.currentShape.render(),n=Object(g["a"])(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=i.value,r=i.x,s=i.y,o=i.landed,u=i.animationClass;if(a){var l=new y(a,this.currentShape.color,u);this.tiles[r][s]=l,o&&(this.landedTiles[r][s]=l)}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"update",value:function(){this.isEnd||(this.renderLandedTiles(),this.renderShape(),this.checkAndRemoveLines())}},{key:"addShape",value:function(t){this.isEnd||(this.update(),this.currentShape=t,this.update())}}]),t}(),w=n("262e"),O=n("2caf"),j=n("3835"),M=(n("d3b7"),n("ddb0"),n("d81d"),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;Object(m["a"])(this,t),this.id=0,this.x=e,this.y=n,this.color=this.getRandomColor(),this.tiles=[],this.landed=!1,this.gameMap=i,this.rotations=[],this.currentRotation=0,this.animationTimeout=null,this.render()}return Object(p["a"])(t,[{key:"buildTiles",value:function(t){t=t||this.tiles;var e,n=Object(g["a"])(t.entries());try{for(n.s();!(e=n.n()).done;){var i,a=Object(j["a"])(e.value,2),r=a[0],s=a[1],o=Object(g["a"])(s.entries());try{for(o.s();!(i=o.n()).done;){var u=Object(j["a"])(i.value,2),l=u[0],c=u[1];t[r][l]=new y(c,this.color)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}}},{key:"getRandomColor",value:function(){var t=["#df451f","#0ec6df","#d6932e","#107fe1","#c82cc6","#52e211","#d0bf22"];return t[Math.round(Math.random()*(t.length-1))]}},{key:"addAnimationClass",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=arguments.length>2?arguments[2]:void 0;this.animationTimeout&&clearTimeout(this.animationTimeout),this.tiles.forEach((function(e){e.forEach((function(e){0!==e.value&&e.addAnimationClass(t)}))})),this.animationTimeout=setTimeout((function(){e.animationTimeout=null,e.tiles.forEach((function(t){t.forEach((function(t){0!==t.value&&(t.animationClass="")}))})),i&&i()}),n)}},{key:"land",value:function(){var t=this;this.tiles=this.tiles.map((function(e){return e.map((function(e){return e.value=e.value===t.id?-1:e.value,e.animationClass="animate__animated animate__faster animate__headShake",e}))})),this.landed=!0,this.id=-1}},{key:"detectHit",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"down",e=0;e<this.tiles.length;e++)for(var n=0;n<this.tiles[e].length;n++){var i=this.tiles[e][n];if(i.value===this.id){var a=this.x+e,r=this.y+n;if("right"===t){var s,o=null===(s=this.gameMap.landedTiles[a][r+1])||void 0===s?void 0:s.value,u=o!==this.id||-1===o,l=0!==o;if(u&&l)return!0}if("left"===t){var c,h=null===(c=this.gameMap.landedTiles[a][r-1])||void 0===c?void 0:c.value,d=h!==this.id||-1===h,v=0!==h;if(d&&v)return!0}if("down"===t){var f,m=this.gameMap.landedTiles[a+1];if(void 0===m)return this.land(),!0;var p=null===(f=m[r])||void 0===f?void 0:f.value;if(p!==this.id&&0!==p&&-1===p)return this.land(),!0}}}return!1}},{key:"moveDown",value:function(){return this.detectHit()||this.landed||(this.x+=1),!this.landed}},{key:"moveLeft",value:function(){return!this.detectHit("left")&&(this.y-=1,this.detectHit(),!0)}},{key:"moveRight",value:function(){return!this.detectHit("right")&&(this.y+=1,this.detectHit(),!0)}},{key:"rotate",value:function(){if(!(this.detectHit("top")||this.detectHit("right")||this.detectHit("bottom")||this.detectHit("left"))){this.currentRotation++;var t=this.currentRotation%this.rotations.length;this.tiles=this.rotations[t]}}},{key:"render",value:function(){for(var t=[],e=0;e<this.tiles.length;e++)for(var n=this.tiles[e],i=0;i<n.length;i++){var a=n[i],r=this.x+e,s=this.y+i;t.push({x:r,y:s,value:a.value,landed:this.landed,animationClass:a.animationClass})}return t}}]),t}()),S=function(t){Object(w["a"])(n,t);var e=Object(O["a"])(n);function n(t,i,a){var r;return Object(m["a"])(this,n),r=e.call(this,t,i,a),r.id=1,r.rotations=[[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],r.tiles=[[1,1,1,1]],r}return n}(M),T=function(t){Object(w["a"])(n,t);var e=Object(O["a"])(n);function n(t,i,a){var r;return Object(m["a"])(this,n),r=e.call(this,t,i,a),r.id=2,r.tiles=[[2,2],[2,2]],r.rotations=[[[2,2],[2,2]]],r}return n}(M),_=function(t){Object(w["a"])(n,t);var e=Object(O["a"])(n);function n(t,i,a){var r;return Object(m["a"])(this,n),r=e.call(this,t,i,a),r.id=3,r.rotations=[[[0,0,0],[3,3,3],[3,0,0]],[[3,3,0],[0,3,0],[0,3,0]],[[0,0,0],[0,0,3],[3,3,3]],[[0,3,0],[0,3,0],[0,3,3]]],r.tiles=[[3,3,3,0],[3,0,0,0]],r}return n}(M),C=function(t){Object(w["a"])(n,t);var e=Object(O["a"])(n);function n(t,i,a){var r;return Object(m["a"])(this,n),r=e.call(this,t,i,a),r.id=6,r.rotations=[[[0,0,0],[6,6,6],[0,6,0]],[[0,6,0],[6,6,0],[0,6,0]],[[0,0,0],[0,6,0],[6,6,6]],[[0,6,0],[0,6,6],[0,6,0]]],r.tiles=[[6,6,6,0],[0,6,0,0]],r}return n}(M),E=function(t){Object(w["a"])(n,t);var e=Object(O["a"])(n);function n(t,i,a){var r;return Object(m["a"])(this,n),r=e.call(this,t,i,a),r.id=4,r.rotations=[[[0,0,0],[0,4,4],[4,4,0]],[[0,4,0],[0,4,4],[0,0,4]],[[0,0,0],[0,4,4],[4,4,0]],[[4,0,0],[4,4,0],[0,4,0]]],r.tiles=[[0,4,4,0],[4,4,0,0]],r}return n}(M),x=function(t){Object(w["a"])(n,t);var e=Object(O["a"])(n);function n(t,i,a){var r;return Object(m["a"])(this,n),r=e.call(this,t,i,a),r.id=5,r.rotations=[[[0,0,0],[5,5,0],[0,5,5]],[[0,0,5],[0,5,5],[0,5,0]],[[0,0,0],[5,5,0],[0,5,5]],[[0,5,0],[5,5,0],[5,0,0]]],r.tiles=[[5,5,0,0],[0,5,5,0]],r}return n}(M);function L(t,e,n){var i;switch(t){case 1:i=new S(e,n,this.gameMap);break;case 2:i=new T(e,n,this.gameMap);break;case 3:i=new _(e,n,this.gameMap);break;case 4:i=new E(e,n,this.gameMap);break;case 5:i=new x(e,n,this.gameMap);break;case 6:i=new C(e,n,this.gameMap);break;default:i=new T(e,n,this.gameMap)}i.buildTiles();var a,r=Object(g["a"])(i.rotations);try{for(r.s();!(a=r.n()).done;){var s=a.value;i.buildTiles(s)}}catch(o){r.e(o)}finally{r.f()}return i}var A=function(){function t(){Object(m["a"])(this,t),this.gameMap=new k(this),this.gameIntervalInstance=null,this.gameInterval=500,this.createShape=L.bind(this),this.gameMap.onEnd=this.onEnd.bind(this),this.controlsActive=!1,document.addEventListener("keydown",this.onKeyDown.bind(this))}return Object(p["a"])(t,[{key:"activateControls",value:function(){this.controlsActive=!0}},{key:"deactivateControls",value:function(){this.controlsActive=!1}},{key:"onKeyDown",value:function(t){this.controlsActive&&this.gameMap.currentShape&&("ArrowLeft"===t.key?this.gameMap.currentShape.moveLeft():"ArrowRight"===t.key?this.gameMap.currentShape.moveRight():"ArrowDown"===t.key?this.gameMap.currentShape.moveDown():"ArrowUp"===t.key&&this.gameMap.currentShape.rotate(),this.gameMap.update())}},{key:"onEnd",value:function(){this.stop(),document.removeEventListener("keydown",this.onKeyDown)}},{key:"addShape",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;this.pause();var i=this.createShape(e,0,n);this.gameMap.addShape(i),i.addAnimationClass("animate__bounceInDown",800,(function(){t.resume()})),this.gameMap.renderShape()}},{key:"addRandomShape",value:function(){var t=Math.round(6*Math.random()),e=Math.round(1+Math.random()*(this.gameMap.width-5));this.addShape(t,e)}},{key:"pause",value:function(){this.deactivateControls(),this.stop()}},{key:"resume",value:function(){this.activateControls(),this.start()}},{key:"moveDownCurrentShape",value:function(){var t;this.gameMap.currentShape?t=this.gameMap.currentShape.moveDown():this.addShape(),!1===t&&this.addShape()}},{key:"start",value:function(){var t=this;this.gameIntervalInstance=setInterval((function(){t.loop()}),this.gameInterval)}},{key:"stop",value:function(){clearInterval(this.gameIntervalInstance)}},{key:"loop",value:function(){this.gameMap.isEnd?this.stop():(this.moveDownCurrentShape(),this.gameMap.update())}},{key:"destroy",value:function(){document.removeEventListener("keydown",this.onKeyDown)}}]),t}(),I=A,H={computed:{tiles:function(){return this.game.gameMap.tiles}},data:function(){return{showTileIds:!1,game:null}},mounted:function(){this.game=new I,this.game.addShape()},destroyed:function(){this.game.destroy()}},D=H,R=(n("8d28"),Object(s["a"])(D,v,f,!1,null,"c12ae99e",null)),P=R.exports,K={name:"Home",components:{Game:P}},$=K,G=Object(s["a"])($,h,d,!1,null,null,null),J=G.exports;i["a"].use(c["a"]);var z=[{path:"/",name:"Home",component:J}],U=new c["a"]({mode:"history",base:"/",routes:z}),q=U,B=n("2f62");i["a"].use(B["a"]);var F=new B["a"].Store({state:{},mutations:{},actions:{},modules:{}});n("4b3c");i["a"].config.productionTip=!1,new i["a"]({router:q,store:F,render:function(t){return t(l)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"8d28":function(t,e,n){"use strict";n("356d")},"9c0c":function(t,e,n){}});
//# sourceMappingURL=app.dac806ac.js.map