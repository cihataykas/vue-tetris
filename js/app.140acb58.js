(function(t){function e(e){for(var i,r,o=e[0],u=e[1],l=e[2],h=0,d=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);c&&c(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},s=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/vue-tetris/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=u;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2d1d":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],r=(n("5c0b"),n("2877")),o={},u=Object(r["a"])(o,a,s,!1,null,null,null),l=u.exports,c=n("8c4f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Game")},d=[],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-tetris theme-light"},[t.game?n("div",{staticClass:"tile-container"},t._l(t.tiles,(function(e,i){return n("div",{key:i,staticClass:"tile-row"},t._l(e,(function(e,i){return n("div",{key:i,class:["tile",e.animationClass,{active:e.value}],style:{background:"linear-gradient(to right bottom, rgb(255, 255, 255) 50%, "+e.color+" 50%)"}},[n("div",{staticClass:"tile-part",style:{backgroundColor:e.color}}),t.showTileIds?n("span",[t._v(t._s(e.value))]):t._e()])})),0)})),0):t._e(),n("div",{staticClass:"bg"}),t.menu?n("div",{ref:"menu",class:["start-menu animate__animated",{animate__bounceInDown:t.menuAnim,animate__bounceOutDown:!t.menuAnim}]},[1===t.menuType?n("button",{staticClass:"button",on:{click:t.onClickPlay}},[t._v("Click to Play!")]):t._e(),2===t.menuType?n("div",[n("div",{style:{fontSize:"28px",fontWeight:"bold",color:"white",background:"black",padding:"10px"}},[t._v(" Your Score is "+t._s(t.game.score)+" ")]),n("button",{staticClass:"button",on:{click:t.onClickPlay}},[t._v("Play Again!")])]):t._e()]):t._e(),t.bottomBar?n("div",{staticClass:"bottom-bar animate__animated animate__bounceInUp"},[n("div",{key:t.game.score,staticClass:"animate__animated animate__tada"},[t._v("SCORE: "+t._s(t.game.score))])]):t._e()])},m=[],f=n("d4ec"),p=n("bee2"),g=n("2909"),b=n("b85c"),y=(n("a434"),n("159b"),function(){function t(e,n,i){Object(f["a"])(this,t),this.value=e,this.color=n,this.animationClass=i,this.animationTimeout=null}return Object(p["a"])(t,[{key:"addAnimationClass",value:function(t){this.animationClass="animate__animated ".concat(t)}}]),t}()),k=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;Object(f["a"])(this,t),this.game=e,this.width=n,this.height=i,this.currentShape=null,this.tiles=this.build(),this.landedTiles=this.build(),this.removeLineTimeout=null}return Object(p["a"])(t,[{key:"build",value:function(){for(var t=[],e=0;e<this.height;e++){t[e]=[];for(var n=0;n<this.width;n++)t[e][n]=new y(0,"transparent")}return t}},{key:"renderLandedTiles",value:function(){for(var t=0;t<this.tiles.length;t++)for(var e=0;e<this.tiles[t].length;e++)this.tiles[t].splice(e,1,this.landedTiles[t][e])}},{key:"checkAndRemoveLines",value:function(){for(var t=this,e=[],n=0;n<this.landedTiles.length;n++){var i=this.landedTiles[n];i.every((function(t){return-1===t.value}))&&(e.push(n),this.game.pause(),i.forEach((function(t){t.animationClass="animate__animated animate__faster animate__zoomOut"})),this.renderLandedTiles())}e.length&&(this.currentShape=null,this.removeLineTimeout&&clearTimeout(this.removeLineTimeout),this.removeLineTimeout=setTimeout((function(){var n,i=Object(b["a"])(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.landedTiles.splice(a,1),t.landedTiles.unshift(Object(g["a"])(t.landedTiles[0])),t.game.score+=10}}catch(s){i.e(s)}finally{i.f()}t.game.resume()}),250))}},{key:"isEnd",get:function(){var t=this.currentShape&&this.currentShape.landed;return t&&this.landedTiles[0].some((function(t){return 0!==t.value}))}},{key:"renderShape",value:function(){if(this.currentShape){var t,e=this.currentShape.render(),n=Object(b["a"])(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=i.value,s=i.x,r=i.y,o=i.landed,u=i.animationClass;if(a){var l=new y(a,this.currentShape.color,u);this.tiles[s][r]=l,o&&(this.landedTiles[s][r]=l)}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"update",value:function(){this.isEnd||(this.renderLandedTiles(),this.renderShape(),this.checkAndRemoveLines())}},{key:"addShape",value:function(t){this.isEnd||(this.update(),this.currentShape=t,this.update())}}]),t}(),w=n("262e"),_=n("2caf"),O=n("3835"),j=(n("d3b7"),n("ddb0"),n("d81d"),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;Object(f["a"])(this,t),this.id=0,this.x=e,this.y=n,this.color=this.getRandomColor(),this.tiles=[],this.landed=!1,this.gameMap=i,this.rotations=[],this.currentRotation=0,this.animationTimeout=null,this.render()}return Object(p["a"])(t,[{key:"buildTiles",value:function(t){t=t||this.tiles;var e,n=Object(b["a"])(t.entries());try{for(n.s();!(e=n.n()).done;){var i,a=Object(O["a"])(e.value,2),s=a[0],r=a[1],o=Object(b["a"])(r.entries());try{for(o.s();!(i=o.n()).done;){var u=Object(O["a"])(i.value,2),l=u[0],c=u[1];t[s][l]=new y(c,this.color)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}}},{key:"getRandomColor",value:function(){var t=["#df451f","#0ec6df","#d6932e","#107fe1","#c82cc6","#52e211","#d0bf22"];return t[Math.round(Math.random()*(t.length-1))]}},{key:"addAnimationClass",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=arguments.length>2?arguments[2]:void 0;this.animationTimeout&&clearTimeout(this.animationTimeout),this.tiles.forEach((function(e){e.forEach((function(e){0!==e.value&&e.addAnimationClass(t)}))})),this.animationTimeout=setTimeout((function(){e.animationTimeout=null,e.tiles.forEach((function(t){t.forEach((function(t){0!==t.value&&(t.animationClass="")}))})),i&&i()}),n)}},{key:"land",value:function(){var t=this;this.tiles=this.tiles.map((function(e){return e.map((function(e){return e.value=e.value===t.id?-1:e.value,e.animationClass="animate__animated animate__faster animate__headShake",e}))})),this.landed=!0,this.id=-1}},{key:"detectHit",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"down",e=0;e<this.tiles.length;e++)for(var n=0;n<this.tiles[e].length;n++){var i=this.tiles[e][n];if(i.value===this.id){var a=this.x+e,s=this.y+n;if("right"===t){var r,o=null===(r=this.gameMap.landedTiles[a][s+1])||void 0===r?void 0:r.value,u=o!==this.id||-1===o,l=0!==o;if(u&&l)return!0}if("left"===t){var c,h=null===(c=this.gameMap.landedTiles[a][s-1])||void 0===c?void 0:c.value,d=h!==this.id||-1===h,v=0!==h;if(d&&v)return!0}if("down"===t){var m,f=this.gameMap.landedTiles[a+1];if(void 0===f)return this.land(),!0;var p=null===(m=f[s])||void 0===m?void 0:m.value;if(p!==this.id&&0!==p&&-1===p)return this.land(),!0}}}return!1}},{key:"moveDown",value:function(){return this.detectHit()||this.landed||(this.x+=1),!this.landed}},{key:"moveLeft",value:function(){return!this.detectHit("left")&&(this.y-=1,this.detectHit(),!0)}},{key:"moveRight",value:function(){return!this.detectHit("right")&&(this.y+=1,this.detectHit(),!0)}},{key:"rotate",value:function(){if(!(this.detectHit("top")||this.detectHit("right")||this.detectHit("bottom")||this.detectHit("left"))){this.currentRotation++;var t=this.currentRotation%this.rotations.length;this.tiles=this.rotations[t]}}},{key:"render",value:function(){for(var t=[],e=0;e<this.tiles.length;e++)for(var n=this.tiles[e],i=0;i<n.length;i++){var a=n[i],s=this.x+e,r=this.y+i;t.push({x:s,y:r,value:a.value,landed:this.landed,animationClass:a.animationClass})}return t}}]),t}()),T=function(t){Object(w["a"])(n,t);var e=Object(_["a"])(n);function n(t,i,a){var s;return Object(f["a"])(this,n),s=e.call(this,t,i,a),s.id=1,s.rotations=[[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],s.tiles=[[1,1,1,1]],s}return n}(j),S=function(t){Object(w["a"])(n,t);var e=Object(_["a"])(n);function n(t,i,a){var s;return Object(f["a"])(this,n),s=e.call(this,t,i,a),s.id=2,s.tiles=[[2,2],[2,2]],s.rotations=[[[2,2],[2,2]]],s}return n}(j),M=function(t){Object(w["a"])(n,t);var e=Object(_["a"])(n);function n(t,i,a){var s;return Object(f["a"])(this,n),s=e.call(this,t,i,a),s.id=3,s.rotations=[[[0,0,0],[3,3,3],[3,0,0]],[[3,3,0],[0,3,0],[0,3,0]],[[0,0,0],[0,0,3],[3,3,3]],[[0,3,0],[0,3,0],[0,3,3]]],s.tiles=[[3,3,3,0],[3,0,0,0]],s}return n}(j),C=function(t){Object(w["a"])(n,t);var e=Object(_["a"])(n);function n(t,i,a){var s;return Object(f["a"])(this,n),s=e.call(this,t,i,a),s.id=6,s.rotations=[[[0,0,0],[6,6,6],[0,6,0]],[[0,6,0],[6,6,0],[0,6,0]],[[0,0,0],[0,6,0],[6,6,6]],[[0,6,0],[0,6,6],[0,6,0]]],s.tiles=[[6,6,6,0],[0,6,0,0]],s}return n}(j),E=function(t){Object(w["a"])(n,t);var e=Object(_["a"])(n);function n(t,i,a){var s;return Object(f["a"])(this,n),s=e.call(this,t,i,a),s.id=4,s.rotations=[[[0,0,0],[0,4,4],[4,4,0]],[[0,4,0],[0,4,4],[0,0,4]],[[0,0,0],[0,4,4],[4,4,0]],[[4,0,0],[4,4,0],[0,4,0]]],s.tiles=[[0,4,4,0],[4,4,0,0]],s}return n}(j),A=function(t){Object(w["a"])(n,t);var e=Object(_["a"])(n);function n(t,i,a){var s;return Object(f["a"])(this,n),s=e.call(this,t,i,a),s.id=5,s.rotations=[[[0,0,0],[5,5,0],[0,5,5]],[[0,0,5],[0,5,5],[0,5,0]],[[0,0,0],[5,5,0],[0,5,5]],[[0,5,0],[5,5,0],[5,0,0]]],s.tiles=[[5,5,0,0],[0,5,5,0]],s}return n}(j);function x(t,e,n){var i;switch(t){case 1:i=new T(e,n,this.gameMap);break;case 2:i=new S(e,n,this.gameMap);break;case 3:i=new M(e,n,this.gameMap);break;case 4:i=new E(e,n,this.gameMap);break;case 5:i=new A(e,n,this.gameMap);break;case 6:i=new C(e,n,this.gameMap);break;default:i=new S(e,n,this.gameMap)}i.buildTiles();var a,s=Object(b["a"])(i.rotations);try{for(s.s();!(a=s.n()).done;){var r=a.value;i.buildTiles(r)}}catch(o){s.e(o)}finally{s.f()}return i}var I=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;Object(f["a"])(this,t),this.gameMap=new k(this,e,n),this.gameIntervalInstance=null,this.gameInterval=500,this.createShape=x.bind(this),this.gameMap.onEnd=this.onEnd.bind(this),this.controlsActive=!1,this.score=0,document.addEventListener("keydown",this.onKeyDown.bind(this))}return Object(p["a"])(t,[{key:"activateControls",value:function(){this.controlsActive=!0}},{key:"deactivateControls",value:function(){this.controlsActive=!1}},{key:"onKeyDown",value:function(t){this.controlsActive&&this.gameMap.currentShape&&("ArrowLeft"===t.key?this.gameMap.currentShape.moveLeft():"ArrowRight"===t.key?this.gameMap.currentShape.moveRight():"ArrowDown"===t.key?this.gameMap.currentShape.moveDown():"ArrowUp"===t.key&&this.gameMap.currentShape.rotate(),this.gameMap.update())}},{key:"onEnd",value:function(){this.stop(),document.removeEventListener("keydown",this.onKeyDown)}},{key:"addShape",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;this.pause();var i=this.createShape(e,0,n);this.gameMap.addShape(i),i.addAnimationClass("animate__bounceInDown",800,(function(){t.resume()})),this.gameMap.renderShape()}},{key:"addRandomShape",value:function(){var t=Math.round(6*Math.random()),e=Math.round(1+Math.random()*(this.gameMap.width-5));this.addShape(t,e)}},{key:"pause",value:function(){this.deactivateControls(),this.stop()}},{key:"resume",value:function(){this.activateControls(),this.start()}},{key:"moveDownCurrentShape",value:function(){var t;this.gameMap.currentShape?t=this.gameMap.currentShape.moveDown():this.addRandomShape(),!1===t&&this.addRandomShape()}},{key:"start",value:function(){var t=this;this.gameIntervalInstance&&this.stop(),this.gameIntervalInstance=setInterval((function(){t.loop()}),this.gameInterval)}},{key:"stop",value:function(){clearInterval(this.gameIntervalInstance)}},{key:"loop",value:function(){this.gameMap.isEnd?this.stop():(this.moveDownCurrentShape(),this.gameMap.update())}},{key:"destroy",value:function(){document.removeEventListener("keydown",this.onKeyDown)}}]),t}(),L=I,R={computed:{isEnd:function(){var t,e;return null===(t=this.game)||void 0===t||null===(e=t.gameMap)||void 0===e?void 0:e.isEnd},tiles:function(){return this.game.gameMap.tiles}},data:function(){return{width:16,height:20,bottomBar:!1,menu:!0,menuType:1,menuAnim:!0,showTileIds:!1,game:null}},mounted:function(){var t=this;this.createNewGame(),this.$refs.menu.addEventListener("animationend",(function(){t.menuAnim||(t.menu=!1)}))},destroyed:function(){this.game.destroy(),this.$refs.menu.removeEventListener("animationend")},methods:{onClickPlay:function(){this.menuAnim=!1,this.bottomBar=!0,this.isEnd&&this.createNewGame(),this.game.start()},createNewGame:function(){this.game=new L(this.width,this.height)}},watch:{isEnd:function(t){t&&(this.menuType=2,this.menuAnim=!0,this.menu=!0)}}},D=R,H=(n("68c7"),Object(r["a"])(D,v,m,!1,null,"03ca7143",null)),P=H.exports,$={name:"Home",components:{Game:P}},G=$,K=Object(r["a"])(G,h,d,!1,null,null,null),B=K.exports;i["a"].use(c["a"]);var N=[{path:"/",name:"Home",component:B}],z=new c["a"]({mode:"history",base:"/vue-tetris/",routes:N}),J=z,U=n("2f62");i["a"].use(U["a"]);var W=new U["a"].Store({state:{},mutations:{},actions:{},modules:{}});n("4b3c");i["a"].config.productionTip=!1,new i["a"]({router:J,store:W,render:function(t){return t(l)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"68c7":function(t,e,n){"use strict";n("2d1d")},"9c0c":function(t,e,n){}});
//# sourceMappingURL=app.140acb58.js.map